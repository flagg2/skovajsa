(this.webpackJsonpskovajsa=this.webpackJsonpskovajsa||[]).push([[0],{27:function(e,t,a){},29:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),s=a(21),c=a.n(s),i=(a(27),a(22)),o=a(10),d=a(8),u=a.n(d),l=a(11),h=a(3),p=a(4),j=a(5),b=a(7),O=a(6),v=(a.p,a(29),a(9)),m=a.n(v),f=a.p+"static/media/spinner.f986ff88.gif",x=a(0),g="https://marhulky.sk:8081/api",y=[{_id:1,name:"Veltl\xednske zelen\xe9",info:"such\xe9, biele, 12.59% alk",price:8.5,priceWithTax:10.2},{_id:2,name:"Pinot blanc",info:"such\xe9, biele, 13% alk",price:3,priceWithTax:5},{_id:3,name:"Frankovka modr\xe1",info:"such\xe9, \u010derven\xe9, 12.5% alk",price:7,priceWithTax:8.4}],k=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){return Object(x.jsx)(C,{})}}]),a}(r.a.Component),C=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={products:y,displayedProducts:y,order:[],contactInfo:{},currentType:void 0},n.addToOrder=n.addToOrder.bind(Object(h.a)(n)),n.removeFromOrder=n.removeFromOrder.bind(Object(h.a)(n)),n.setCountOfProduct=n.setCountOfProduct.bind(Object(h.a)(n)),n.filterProducts=n.filterProducts.bind(Object(h.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(h.a)(n)),n.createOrder=n.createOrder.bind(Object(h.a)(n)),n.closeMessage=n.closeMessage.bind(Object(h.a)(n)),n}return Object(j.a)(a,[{key:"filterProducts",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("all"!==t){e.next=6;break}return e.next=3,m.a.get(g+"/products");case 3:a=e.sent,e.next=9;break;case 6:return e.next=8,m.a.post(g+"/products/filter",{filters:{type:t}});case 8:a=e.sent;case 9:this.setState({displayedProducts:a.data.products,currentType:t});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addToOrder",value:function(e){var t=this.state.order,a=this.state.products.find((function(t){return t._id===e}));t.find((function(t){return t._id===e}))?t.map((function(t){return t._id===e&&(t.count+=1),t})):t.push(Object(o.a)(Object(o.a)({},a),{},{count:1})),this.setState({order:t})}},{key:"closeMessage",value:function(){this.setState({showLoader:!1})}},{key:"handleInputChange",value:function(e,t){console.log(e,t);var a=Object(o.a)({},this.state.contactInfo);a[e]=t,this.setState({contactInfo:a}),console.log(this.state)}},{key:"removeFromOrder",value:function(e){var t=this.state.order;t=t.filter((function(t){return t._id!==e})),this.setState({order:t})}},{key:"setCountOfProduct",value:function(e,t){if(0===t)return this.removeFromOrder(e);var a=this.state.order;a=a.map((function(a){return a._id===e&&(a.count=t),a})),this.setState({order:a})}},{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(g+"/products");case 2:t=e.sent,this.setState({products:t.data.products,displayedProducts:t.data.products,currentType:"all",showLoader:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,a,n,r,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a=[],n=Object(i.a)(this.state.order);try{for(n.s();!(r=n.n()).done;)s=r.value,t.push(s._id),a.push(s.count)}catch(d){n.e(d)}finally{n.f()}if(0!=this.state.order.length){e.next=5;break}return e.abrupt("return",this.setState({showLoader:!0,isLoading:!1,loaderMessage:"Zvo\u013ete si pros\xedm aspo\u0148 jeden produkt"}));case 5:if(!0===this.state.contactInfo.gdpr){e.next=7;break}return e.abrupt("return",this.setState({showLoader:!0,isLoading:!1,loaderMessage:"Pred odoslan\xedm objedn\xe1vky mus\xedte s\xfahlasi\u0165 so spracovan\xedm osobn\xfdch \xfadajov"}));case 7:return c=Object(o.a)(Object(o.a)({},this.state.contactInfo),{},{products:t,quants:a}),this.setState({showLoader:!0,isLoading:!0}),e.prev=9,e.next=12,m.a.post(g+"/orders",c);case 12:e.sent,this.setState({isLoading:!1,loaderMessage:"\u010eakujeme za objedn\xe1vku",afterExited:function(){window.location.reload()}}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),this.setState({isLoading:!1,loaderMessage:"Vypl\u0148te pros\xedm v\u0161etky \xfadaje"});case 19:case"end":return e.stop()}}),e,this,[[9,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.displayedProducts.map((function(t){return Object(x.jsx)(I,{id:t._id,addToOrder:e.addToOrder,data:t})})),a=this.state.order.map((function(t){return Object(x.jsx)(P,{id:t._id,setCountOfProduct:e.setCountOfProduct,removeFromOrder:e.removeFromOrder,data:t})}));return Object(x.jsxs)("div",{className:"order-form",children:[Object(x.jsx)("h2",{className:"order-heading",children:"Objedn\xe1vka"}),Object(x.jsx)(w,{active:this.state.currentType,filterProducts:this.filterProducts}),Object(x.jsxs)("div",{className:"order-header",children:[Object(x.jsx)("h3",{className:"product",children:"Produkt"}),Object(x.jsx)("h3",{className:"price top",children:"Cena"}),Object(x.jsx)("div",{className:"ks"})]}),t,Object(x.jsx)("h2",{style:{marginTop:"40px"},className:"summary-heading",children:"Ko\u0161\xedk"}),Object(x.jsxs)("div",{className:"order-header",children:[Object(x.jsx)("h3",{className:"product",children:"Produkt"}),Object(x.jsx)("h3",{className:"price",children:"Cena"}),Object(x.jsx)("h3",{className:"ks",children:"Ks."})]}),a,Object(x.jsx)(N,{order:this.state.order}),Object(x.jsx)(S,{handleInputChange:this.handleInputChange}),Object(x.jsx)("div",{className:"orderButton",onClick:this.createOrder,children:"Objedna\u0165"}),this.state.showLoader&&Object(x.jsx)(F,{closeMessage:this.closeMessage,isLoading:this.state.isLoading,message:this.state.loaderMessage,afterExited:this.state.afterExited})]})}}]),a}(r.a.Component),N=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props.order,t=e.reduce((function(e,t){return e+t.price*t.count}),0).toFixed(2)+"\u20ac",a=e.reduce((function(e,t){return e+t.priceWithTax*t.count}),0).toFixed(2)+"\u20ac";return Object(x.jsxs)("div",{className:"price-summary",children:[Object(x.jsxs)("div",{className:"price-block",children:[Object(x.jsx)("div",{children:"Cena bez DPH"}),Object(x.jsx)("div",{className:"price",children:t})]}),Object(x.jsxs)("div",{className:"price-block",children:[Object(x.jsx)("div",{children:"Cena s DPH"}),Object(x.jsx)("div",{className:"price",children:a})]})]})}}]),a}(r.a.Component),I=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{className:"product-cont",children:[Object(x.jsx)("img",{className:"product-img",alt:"vino",src:"".concat(g.replace("/api",""),"/uploads/").concat(this.props.data.image)}),Object(x.jsxs)("div",{className:"name-and-info",children:[Object(x.jsx)("h4",{children:this.props.data.name}),Object(x.jsx)("div",{children:this.props.data.info})]}),Object(x.jsx)("div",{className:"price",children:this.props.data.priceWithTax.toFixed(2)+"\u20ac"}),Object(x.jsx)("div",{className:"add-to-cart",onClick:function(){return e.props.addToOrder(e.props.data._id)},children:Object(x.jsx)("ion-icon",{className:"add-icon",name:"add-circle-outline"})})]})}}]),a}(r.a.Component),P=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{className:"product-cont",children:[Object(x.jsx)("h4",{children:this.props.data.name}),Object(x.jsx)("div",{className:"price",children:(this.props.data.priceWithTax*this.props.data.count).toFixed(2)+"\u20ac"}),Object(x.jsx)("div",{className:"set-quant",children:this.props.data.count}),Object(x.jsxs)("div",{className:"arrows",children:[Object(x.jsx)("div",{className:"arrow-up",onClick:function(){return e.props.setCountOfProduct(e.props.data._id,e.props.data.count+1)},children:Object(x.jsx)("ion-icon",{name:"arrow-up-outline"})}),Object(x.jsx)("div",{className:"arrow-down",onClick:function(){return e.props.setCountOfProduct(e.props.data._id,e.props.data.count-1)},children:Object(x.jsx)("ion-icon",{name:"arrow-down-outline"})})]})]})}}]),a}(r.a.Component),w=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this,t=[{filterName:"all",heading:"V\u0161etko"},{filterName:"white",heading:"Biele"},{filterName:"red",heading:"\u010cerven\xe9"},{filterName:"rose",heading:"Ru\u017eov\xe9"}].map((function(t){return Object(x.jsx)(T,{filterProducts:e.props.filterProducts,active:e.props.active,filterName:t.filterName,heading:t.heading})}));return Object(x.jsx)("div",{className:"filters",children:t})}}]),a}(r.a.Component),T=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this;return Object(x.jsx)("div",{style:this.props.active===this.props.filterName?{backgroundColor:"black",color:"white"}:{},onClick:function(){return e.props.filterProducts(e.props.filterName)},children:this.props.heading})}}]),a}(r.a.Component),S=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this)).state={times:[],selectedCity:""},n.handleCityChange=n.handleCityChange.bind(Object(h.a)(n)),n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(g+"/times");case 2:t=e.sent,this.setState({times:t.data.times}),t.data.times.length>1&&(this.setState({selectedCity:t.data.times[0].city}),this.props.handleInputChange("city",t.data.times[0].city),this.props.handleInputChange("deliveryDate",0!==t.data.times[0].dates.length&&t.data.times[0].dates[0])),console.log(t.data.times);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleCityChange",value:function(e){this.setState({selectedCity:e})}},{key:"render",value:function(){var e=this,t=this.state.times.map((function(e){return Object(x.jsx)("option",{children:e.city})})),a=this.state.times.find((function(t){return t.city==e.state.selectedCity})),n=a&&a.dates.length>0?Object(x.jsx)("select",{onClick:function(t){return e.props.handleInputChange("deliveryDate",t.target.value)},children:a.dates.map((function(e){return Object(x.jsx)("option",{children:e})}))}):Object(x.jsx)("div",{children:"\u017diadne term\xedny"});return Object(x.jsxs)("div",{className:"contactForm",children:[Object(x.jsx)("h2",{style:{marginTop:"40px"},children:"Kontaktn\xe9 \xfadaje"}),Object(x.jsxs)("div",{className:"contactInfo",children:[Object(x.jsxs)("div",{className:"contactInput",children:[Object(x.jsx)("div",{className:"label",children:"Meno"}),Object(x.jsx)("input",{onChange:function(t){return e.props.handleInputChange("name",t.target.value)}})]}),Object(x.jsxs)("div",{className:"contactInput",children:[Object(x.jsx)("div",{className:"label",children:"Priezvisko"}),Object(x.jsx)("input",{onChange:function(t){return e.props.handleInputChange("surname",t.target.value)}})]}),Object(x.jsxs)("div",{className:"contactInput",children:[Object(x.jsx)("div",{className:"label",children:"Email"}),Object(x.jsx)("input",{onChange:function(t){return e.props.handleInputChange("email",t.target.value)}})]}),Object(x.jsxs)("div",{className:"contactInput",children:[Object(x.jsx)("div",{className:"label",children:"Telef\xf3n"}),Object(x.jsx)("input",{onChange:function(t){return e.props.handleInputChange("phone",t.target.value)}})]})]}),Object(x.jsx)("h2",{style:{marginTop:"40px"},children:"Dodacie \xfadaje"}),Object(x.jsxs)("div",{className:"contactInfo",children:[Object(x.jsxs)("div",{className:"contactInput",children:[Object(x.jsx)("div",{className:"label",children:"N\xe1zov ulice a popisn\xe9 \u010d."}),Object(x.jsx)("input",{onChange:function(t){return e.props.handleInputChange("address",t.target.value)}})]}),Object(x.jsxs)("div",{className:"contactInput",children:[Object(x.jsx)("div",{className:"label",children:"Mesto"}),Object(x.jsx)("select",{onClick:function(t){e.props.handleInputChange("city",t.target.value),e.handleCityChange(t.target.value)},children:t})]}),Object(x.jsxs)("div",{className:"contactInput",children:[Object(x.jsx)("div",{className:"label",children:"Term\xedn dodania"}),n]})]}),Object(x.jsxs)("div",{className:"gdpr",children:[Object(x.jsx)("div",{children:"S\xfahlas\xedm so spracovan\xedm osobn\xfdch \xfadajov"}),Object(x.jsx)("input",{type:"checkbox",onChange:function(t){return e.props.handleInputChange("gdpr",t.target.checked)}})]})]})}}]),a}(r.a.Component),F=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this;return Object(x.jsx)("div",{className:"overlay",children:Object(x.jsx)("div",{className:"loader",children:this.props.isLoading?Object(x.jsx)("img",{src:f,alt:"spinner"}):Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"loaderMessage",children:this.props.message}),Object(x.jsx)("div",{className:"orderButton",onClick:function(){e.props.closeMessage(),e.props.afterExited&&e.props.afterExited()},children:"Zavrie\u0165"})]})})})}}]),a}(r.a.Component),L=k,M=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,50)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};c.a.render(Object(x.jsx)("div",{children:Object(x.jsx)(L,{})}),document.getElementById("root")),M()}},[[49,1,2]]]);
//# sourceMappingURL=main.6574de6e.chunk.js.map